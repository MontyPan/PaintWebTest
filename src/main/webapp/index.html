<!DOCTYPE html>
<html>
<head>
<title></title>
<script type="text/javascript" src="paintweb/source/paintweb.js"></script>
<script type="text/javascript" src="paintweb/source/includes/lib.js"></script>
</head>
<body>
</body>
<script type="text/javascript">
(function () {
	function pwInit (ev) {
		if (ev.state === PaintWeb.INIT_ERROR) {
			alert('Demo: PaintWeb initialization failed.');
			return;
		} else if (ev.state === PaintWeb.INIT_DONE) {
		} else {
			alert('Demo: Unrecognized PaintWeb initialization state ' + ev.state);
			return;
		}
	};
	
	function getParameter(name) {
	    name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
	    var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
	        results = regex.exec(location.search);
	    return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
	}

	var imageUrl = getParameter("url");
	if (imageUrl.length < 1) {
		alert("請指定圖檔路徑");
		return;
	}
	
	var pw = new PaintWeb(); // Create a PaintWeb instance.
	pw.config.guiPlaceholder = document.body;
	pw.config.configFile = 'config-example.json';
	

	var image = new Image();
	image.src = imageUrl;
	image.onload = function() {
		pw.config.imageLoad	= image;
		pw.init(pwInit);
	};
	image.onerror = function(event) {
		alert("指定圖檔 " + imageUrl + " 不存在");
	}
})();
</script>
</html>
